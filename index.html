<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <style>
      @font-face {
        font-display: swap;
        font-family: 'PT Mono';
        font-style: normal;
        font-weight: 400;
        src:
          local('PT Mono'),
          local('PTMono-Regular'),
          url('/fonts/pt-mono-v7-latin-regular.woff2') format('woff2'),
          url('/fonts/pt-mono-v7-latin-regular.woff') format('woff');
      }

      * {
        box-sizing: border-box;
        font: inherit;
        margin: 0;
        padding: 0;
        max-width: 100%;
      }

      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: 'PT Mono', monospace;
        font-size: 20px;
        line-height: 1.5;
      }

      .calculator {
        width: 30em;
        padding: 1em;
        display: grid;
        gap: 0.25em;
        grid-template-columns: repeat(4, 1fr);
        grid-template-areas:
          'output  output  output   output'
          'plus    minus   divide   multiply'
          'seven   eight   nine     clear'
          'four    five    six      equals'
          'one     two     three    equals'
          'zero    zero    decimal  equals';

        --border: 1px solid hsl(50, 15%, 60%);
        --hue: 180;
        --saturation: 15%;
      }

      .calculator output {
        grid-column: 1 / 5;
        display: flex;
        justify-content: flex-end;
        align-items: center;
        border: var(--border);
        padding: 1em;
        line-height: 1;
        height: 3em;
      }

      .calculator button {
        color: #222;
        background: hsl(var(--hue), var(--saturation), 80%);
        border: var(--border);
        min-height: 3em;
      }

      .calculator button:disabled {
        color: #666;
        background: hsl(var(--hue), calc(var(--saturation) / 2), 80%);
      }

      .clear {
        grid-area: clear;

        --hue: 0;
        --saturation: 80%;
      }

      .plus,
      .minus,
      .divide,
      .multiply,
      .equals {
        --saturation: 60%;
      }

      .plus {
        grid-area: plus;
      }

      .minus {
        grid-area: minus;
      }

      .divide {
        grid-area: divide;
      }

      .multiply {
        grid-area: multiply;
      }

      .equals {
        grid-area: equals;

        --hue: 120;
      }

      .nine {
        grid-area: nine;
      }

      .eight {
        grid-area: eight;
      }

      .seven {
        grid-area: seven;
      }

      .six {
        grid-area: six;
      }

      .five {
        grid-area: five;
      }

      .four {
        grid-area: four;
      }

      .three {
        grid-area: three;
      }

      .two {
        grid-area: two;
      }

      .one {
        grid-area: one;
      }

      .zero {
        grid-area: zero;
      }

      .decimal {
        grid-area: decimal;
      }
    </style>
  </head>
  <body>
    <form></form>
    <script type="module" crossorigin="anonymous">
    import framework, {domUpdate, view} from '@erickmerchant/framework'

    const target = document.querySelector('form')

    const update = domUpdate(target)

    const {app} = view()

    const state = {}

    const digit = (digit) => (state) => state

    const operator = (operator) => (state) => state

    const decimal = () => (state) => state

    const clear = () => (state) => state

    const enter = () => (state) => state

    const buttonAttrs = (className, commit, cb, ...args) => {
      const disabled = false

      return {
        class: className,
        disabled,
        type: 'button',
        onclick() {
          commit(cb(...args))
        }
      }
    }

    framework({
      state,
      update,
      component({state, commit}) {
        return app`<form class="calculator">
          <output class="output">${''}</output>

          <button ${buttonAttrs('clear', commit, clear)}>C</button>
          <button ${buttonAttrs('plus', commit, operator, '+')}>+</button>
          <button ${buttonAttrs('minus', commit, operator, '-')}>-</button>
          <button ${buttonAttrs('multiply', commit, operator, '*')}>*</button>
          <button ${buttonAttrs('divide', commit, operator, '/')}>/</button>
          <button ${buttonAttrs('equals', commit, enter)}>=</button>

          <button ${buttonAttrs('nine', commit, digit, 9)}>9</button>
          <button ${buttonAttrs('eight', commit, digit, 8)}>8</button>
          <button ${buttonAttrs('seven', commit, digit, 7)}>7</button>

          <button ${buttonAttrs('six', commit, digit, 6)}>6</button>
          <button ${buttonAttrs('five', commit, digit, 5)}>5</button>
          <button ${buttonAttrs('four', commit, digit, 4)}>4</button>

          <button ${buttonAttrs('three', commit, digit, 3)}>3</button>
          <button ${buttonAttrs('two', commit, digit, 2)}>2</button>
          <button ${buttonAttrs('one', commit, digit, 1)}>1</button>

          <button ${buttonAttrs('zero', commit, digit, 0)}>0</button>
          <button ${buttonAttrs('decimal', commit, decimal)}>.</button>
        </form>`
      }
    })
    </script>
  </body>
</html>
